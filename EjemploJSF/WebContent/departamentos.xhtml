<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"    
	  xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html">
 
    <h:head>
    <meta charset="utf-8"></meta>
	<meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
	<meta name="viewport" content="width=device-width, initial-scale=1"></meta>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="res/css/bootstrap.min.css"></link>
	<link href="res/css/style.css" rel="stylesheet"></link>
	<!-- Latest compiled and minified JavaScript -->
	<script src="res/js/bootstrap.min.js"></script>
    	<title>Departamentos</title>
    </h:head>
    <h:body>
    	<div class="container">
	      <div class="header clearfix">
	        <nav>
	          <ul class="nav nav-pills pull-right">
	            <li role="presentation" class="active"><a href="index.xhtml" >Inicio</a></li>
	            
	          </ul>
	        </nav>
	        <h3 class="text-muted">JSF 2.2</h3>
	      </div>

		</div>
      	<div class="container">
     		<div class="jumbotron">
      			<h2>Departamentos</h2>
      	
		    	<h:form>
		    	<h:selectOneMenu label="Departamentos" value="#{departamentos.idDep}" onchange="borrarTabla()">
					<f:selectItems value="#{departamentos.lista}" var="d" itemValue="#{d.departmentId}" itemLabel="#{d.departmentName}"></f:selectItems>    	
		    	</h:selectOneMenu>
		    	<h:commandButton value="Enviar" action="#{departamentos.mostrarTodos}" ></h:commandButton>
		    	</h:form>
	    	</div>
    	</div>
    	
    	<div class="container">
    		<div class="jumbotron">
      			<h2>Empleados</h2>
      			<h2><h:outputText value="No hay empleados" rendered ="#{empty departamentos.listaEmpleados}"></h:outputText></h2>
    		</div>
		    	<div class="row">
				  <div class="col-xs-6">
				  	<h:form rendered ="#{not empty departamentos.listaEmpleados}" >
				    	<h:selectOneMenu label="Empleados" value="#{departamentos.id}" onchange="borrarDetalle()">
							<f:selectItems value="#{departamentos.listaEmpleados}" var="e" itemValue="#{e.id}" itemLabel="#{e.f_name}"></f:selectItems>
				    	</h:selectOneMenu>
		    			<h:commandButton action="#{departamentos.init}"  value="Enviar"> </h:commandButton>
		    		</h:form>
		    		
				  </div>
<script type="text/javascript">
	function borrarTabla(){
		var tablaEmpleado = document.getElementById("muestraEmpleado");
		tablaEmpleado.innerHTML="";
		document.getElementById("detalle").innerHTML="";
	}
	function borrarDetalle(){
		document.getElementById("detalle").innerHTML="";	
	}
</script>
				  <div class="col-xs-6">
				  	<h:dataTable id="muestraEmpleado" rendered ="#{not empty departamentos.listaEmpleados}" value="#{departamentos.listaEmpleados}" var="e">
				  		<h:column>
				  			<f:facet name="header">Nombre</f:facet>
				  			<strong>#{e.f_name}</strong>
				  		</h:column>
				  		<h:column>
				  			<f:facet name="header">Apellido</f:facet>
				  			#{e.l_name}
				  		</h:column>
				  		<h:column>
				  			<f:facet name="header">Email</f:facet>
				  			#{e.email}
				  		</h:column>
				  	</h:dataTable>
				  </div>
				</div>
     		
    	</div>
    	
    	<br></br>
    	<br></br>
    	<div class="container" >
    		<div class="jumbotron" id="detalle">
    			<h3>Detalle de un empleado</h3>
	    		<h4>#{departamentos.nombre} <cite>#{departamentos.apellido}</cite>  <small>#{departamentos.email}</small></h4>
	    	</div>
	    	<footer class="footer">
		        <p>PÃ¡gina web realizada por <a href="http://codigonatura.com" target="_blank"><img src="http://codigonatura.com/wp-content/uploads/2014/10/cn-logo1-e1413870836327.png" width="100px" style="vertical-align:middle;"></img></a></p>
		    </footer>
    	</div>
    	
    </h:body>
</html>